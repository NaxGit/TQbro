<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./canvas/bootstrap.css">
    <link rel="stylesheet" href="./canvas/page.css">
    <script src="./caffeine/dexie.js"></script>
    <title>TQ</title>
</head>
<body>
    <nav class="navbar bg-primary">
        <div class="container-fluid pb-2">
            <span class="navbar-brand h1">TQ</span>
            <button class="navbar-toggler">
                <span class="navbar-toggler-icon" onclick="opener()"></span>
            </button>
        </div>
        <div class="container-fluid">
            <div class="input-group">
                <input type="text" id="searchbar" class="form-control" onkeyup="JSsearch()" placeholder="Search">
                <span class="input-group-text">â˜„</span>
            </div>
        </div>
    </nav>
    <div id="Cards"></div>
    <div id="Icons"></div>
</body>

<script src="./caffeine/JSsearch.js"></script>

<script>
    function opener() {
    window.location.href = "./index.html";
}
</script>

<script type="module">


// const Index = await new Dexie("Queens").open().then().catch(Error, e => {window.location.href = "./Machining/upgrade.html";});

const idata = await new Dexie("Uchi").open();

const Stock = await idata.table("stock").toArray();

const Icons = document.getElementById("Icons");

icons();

function icons()
{
    Stock.forEach((Item) =>
    {
        let icon = document.createElement('img');
        icon.id = Item.SKU;
        icon.src = Item.Imge;
        icon.className = "iIcon";
        icon.onclick = function () { dddss(Item.SKU); };

        Icons.append(icon);
    });
}
function dddss(i) {
    document.getElementById("Cards").innerHTML = "";
    
    const result = Stock.find(({ SKU }) => SKU === i);
    
    let clone = document.createElement('div');
    clone.className = "Cardss";
    clone.innerHTML =
    `
<div class="card">
  <img src="${result.Imge}" class="card-img-top" alt="...">
  <div class="card-body">
    <h5 class="card-title">${result.Name}</h5>
    <p class="card-text">Selling price Ksh. ${result.Sell}</p>
    <p class="card-text">Stock in shop ${result.Qtys} pcs</p>
    <a href="#" class="btn btn-primary">Tap to sell</a>
  </div>
</div>
    `;

    console.log(result);
    document.getElementById("Cards").append(clone);



}

</script>
</html>